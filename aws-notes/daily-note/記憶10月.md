# AWS 重要ポイント（10月）

## VPC Endpoint

- **Gateway Endpoint** → ルートテーブル必要（S3 / DynamoDB）
- **Interface Endpoint** → ルートテーブル不要（ENI経由で通信）

---

## クロスアカウントロール

「自分のアカウントのユーザー/ロールが、別アカウントにあるIAMロールをSTS経由で一時的に引き受けてリソースにアクセスする仕組み」

---

## バックアップ vs レプリケーション

- **バックアップ（snapshot / restore）** は"静止点コピー"であり、同期を維持できない
- **レプリケーション（replication / sync）** は継続的な差分同期ができる

---

## FSx

FSxのデプロイタイプ（Single-AZ ⇔ Multi-AZ）は作成後に変更できない仕様

---

## データ形式

- **CSV形式** はコスト高・分析非効率（列指向ではない）
- **Parquet形式** でS3に蓄積 → コスト最適化・長期保存に最適

---

## OpsWorks

Chef/Puppetベース。サーバ構成管理に特化。運用がやや古い

---

## NAT

- 低トラフィックなら **NAT インスタンス** の方が安い
- 中〜高トラフィックなら **NAT Gateway** の方が安くて運用コストも低い

---

## Lambda ハンドラー外初期化

| 項目 | 説明 |
|-----|------|
| 「ハンドラー外で初期化」 | Lambdaコンテナの初回ロード時に一度だけ実行 |
| 効果 | 同じコンテナが再利用される限りDB接続を再利用可能 |
| メリット | 高速化・DB接続数削減・レスポンス安定 |
| 注意点 | コンテナ破棄時に備え再接続処理を実装 |
| ベストプラクティス | 「ハンドラー外初期化」＋「RDS Proxy併用」 |

ACLは昔の仕組みなので、IAMやバケットポリシーと別に存在し、管理が複雑でミスが起きやすい

CNAME
「このドメインは、別のドメイン名を指してます」と教える。
api.example.com.   CNAME   abc123.execute-api.ap-northeast-1.amazonaws.com
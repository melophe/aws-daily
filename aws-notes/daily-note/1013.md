# CloudTrailが記録するSession Managerのイベント

Session Managerでの操作は、CloudTrailで次のようなイベントとして記録される：

| 操作内容 | CloudTrailイベント名 |
|---------|-------------------|
| セッション開始 | StartSession |
| セッション終了 | TerminateSession |
| セッション情報取得 | DescribeSessions |
| ポートフォワーディング開始 | StartPortForwardingSession |
| SSHプロキシ経由の接続 | StartSession（トンネルタイプが異なる） |

---

## 深い記録を取りたい場合

CloudTrailのログはAPIレベルの操作記録にとどまるため、実際に入力されたコマンド履歴までは記録しない。
コマンド内容を残したい場合は、以下の追加設定を行う。

### Session Manager のセッション記録を有効化する

Systems Manager → Session Manager 設定画面で：

**「セッションデータの記録先」を設定**

- S3バケット
- CloudWatch Logs

これを有効にすると、以下が記録される：

- コマンドの入出力
- 実行時間
- 操作ユーザー

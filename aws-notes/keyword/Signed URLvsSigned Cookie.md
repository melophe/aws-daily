# CloudFront 署名付きアクセス制御

## 署名付きURL (Signed URL)

### 概要
特定のオブジェクト単位でアクセス制御を行う仕組み

### 特徴
- 有効期限、IP制限などを付与したURLを発行
- オブジェクト毎に個別のURL生成が必要

### 利用場面
- 特定コンテンツへの期間限定アクセス
- 個別課金のコンテンツ販売

### URL形式の変化

#### 通常のURL
```
https://daaaaaa.cloudfront.net/video/movie.mp4
```

#### 署名付きURL
```
https://daaaaaaa.cloudfront.net/video/movie.mp4?Expires=1699999999&Signature=xxxxxx&Key-Pair-Id=APKA123456789
```

クエリパラメータが追加されるため元のURLが変更される

---

## 署名付きCookie (Signed Cookie)

### 概要
複数オブジェクトをまとめてアクセス制御する仕組み

### 特徴
- クライアントにCookieを配布してアクセス許可
- 同じ配信元の複数ファイルに一度に適用可能
- 元のURLを変更せずにアクセス制御

### 利用場面
- 有料会員向けの全コンテンツアクセス
- サイト全体での認証制御

### アクセス方法
クライアントが認証済みCookieを持つ限り、通常のURL（/video/movie.mp4）でアクセス可能

---

## 比較表

| 項目 | 署名付きURL | 署名付きCookie |
|------|------------|---------------|
| **適用範囲** | 単一オブジェクト | 複数オブジェクト |
| **URL変更** | あり（クエリ付き） | なし（元URL維持） |
| **利用場面** | 個別コンテンツ販売 | 会員制サービス |
| **実装複雑度** | シンプル | やや複雑 |

---

## 使い分けの指針

### 署名付きURL
「チケット1枚でこの映画だけ」方式
- 単発コンテンツ配信
- ダウンロードリンクの一時共有

### 署名付きCookie
「会員証で映画館の全作品OK」方式
- サブスクリプションサービス
- 認証後の全コンテンツアクセス
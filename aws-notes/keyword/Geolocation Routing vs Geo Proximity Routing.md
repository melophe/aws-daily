# 位置情報ルーティング (Geolocation Routing)

## 基準
ユーザーのIPアドレスから特定した国・地域

## 動作
その国/地域ごとに必ず指定したリソースへ誘導

## 用途
- コンプライアンス要件「日本ユーザーは必ず東京リージョン」
- 国別コンテンツ配信（言語・規制対応など）

## 特徴
- **「必ず」ルール通りに振り分けられる**
- ユーザーの場所が判定できない場合に備えて**デフォルトルート**を設定可能

## 適用例
日本 = 東京ELB、韓国 = ソウルELB、その他 = バックアップリージョン

---

# 地理的近接ルーティング (Geo Proximity Routing)

## 基準
リソースの**地理的位置**とユーザーの場所との「距離」

## 動作
ユーザーから物理的に近いリソースへ誘導（Route 53 Traffic Flowで設定）

## 用途
- グローバルに分散したサーバ群の「距離ベース」ルーティング
- 特定のリージョンに**バイアス (bias)** をかけて、トラフィックを多めに流すことも可能

## 特徴
- 厳密に「国ごと」ではなく、距離とバイアスで調整
- コンプライアンス要件があるケースには不向き

## 適用例
- アジア → 東京リージョン
- 北米 → バージニアリージョン
- ただし東京にバイアス +10% を設定して「多少遠くても東京に誘導」などが可能

---

# 比較表

| 項目 | 位置情報ルーティング (Geolocation) | 地理的近接ルーティング (Geo Proximity) |
|------|-----------------------------------|---------------------------------------|
| **基準** | ユーザーの国/地域 (IP判定) | ユーザーとリソースの物理的距離 |
| **制御** | 国単位で固定的に制御可能 | 距離ベース + バイアス調整 |
| **ユースケース** | コンプライアンス要件 / 国ごとのコンテンツ配信 | グローバル配信最適化 / リージョン間の負荷分散 |
| **柔軟性** | 固定（必ず割り当てられたリージョンへ） | 動的（近さとバイアスで調整可能） |
| **Route 53 機能** | 標準レコード設定で可能 | Traffic Flowポリシーが必要 |

---

# まとめ

## 位置情報ルーティング
国ごとに「必ずこのリージョン」と固定したいとき（コンプライアンス必須案件に最適）

## 地理的近接ルーティング
ユーザーに物理的に近いリソースに自動で寄せたいとき（グローバル配信の最適化）

**「日本＝東京、韓国＝ソウル」のケース** → 位置情報ルーティングがベスト

**「世界中のユーザーを最も近いリージョンに寄せたい」** → 地理的近接ルーティング
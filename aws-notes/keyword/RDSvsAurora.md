# RDS vs Aurora 比較

## 基本比較表

| 項目 | RDS (MySQL/PostgreSQL) | Aurora |
|------|------------------------|--------|
| **フェイルオーバー時間** | 1〜2分（長いと5分） | 20〜60秒（多くは30秒前後） |
| **レプリカ** | 非同期コピー、遅延あり | 同じストレージ参照、遅延ほぼなし |
| **可用性** | AZ障害に対応するが時間がかかる | より高速で自動化されたフェイルオーバー |

---

## Aurora レプリカの仕組み

### 分散ストレージ層
Auroraは分散ストレージ層を共有しており、レプリカも同じストレージを参照

### 特徴
- **遅延**: ほぼゼロ（ストレージを直接参照するため）
- **フェイルオーバー**: 高速（数十秒以内で完了）
- **ストレージ**: クラスター全体で共有、コピー不要

---

## フェイルオーバー時間の詳細

### Aurora (シングルマスター構成)

#### 標準的な時間
- 通常は30秒前後
- 場合によっては20〜50秒程度
- AWS公式も「一般的に30秒未満」と説明

#### 最大時間
最長で1分弱（60秒程度）かかることもある

### RDS (従来のMySQL/PostgreSQL)

#### 標準的な時間
一般的に1〜2分程度

#### 最大時間
条件によっては3〜5分かかるケースもある

#### 時間がかかる理由
- プライマリが停止したらスタンバイに昇格
- ストレージの切り替え・同期処理が必要
- DNSの更新などが必要

---

## 設計上の考慮点

### Aurora
一般的には30秒以内だが、最悪で60秒程度は見込んで設計する必要

### RDS
数分かかることがあるため、ストレージ同期やレプリカ昇格に時間が必要

---

## まとめ

### Aurora の優位性
- 高速なフェイルオーバー
- レプリカ間の遅延がほぼゼロ
- 分散ストレージによる高可用性

### RDS の特徴
- 従来型のレプリケーション
- フェイルオーバーに時間を要する
- ストレージ同期が必要
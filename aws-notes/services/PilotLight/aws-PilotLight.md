# Pilot Light（パイロットライト）

AWSの災害対策（DR: Disaster Recovery）戦略の“構成パターン（設計手法）”

## 概要

「Pilot Light（パイロットライト）」は、AWSでよく出てくる**災害対策（DR: Disaster Recovery）アーキテクチャの1つ**

### 一言で言えば

「最小限の環境だけをAWS上で常時起動しておき、災害時にフル環境へ拡張するDR方式」

---

## 基本の考え方

オンプレミスで本番を動かしているときに、AWS上には完全な待機系を作るとコストが高すぎる。

そこで Pilot Light では：

1. **最低限のシステムだけ**（DBや重要設定など）をAWS上に常に動かしておく
2. **災害発生時に**残りのEC2などをスケールアップして本番稼働に昇格させる

### アーキテクチャ図

#### 通常時:
```
 ┌──────────────┐
 │オンプレミス本番環境│  ← 稼働中
 └──────────────┘
          │
     レプリケーション
          ↓
 ┌───────────────────────┐
 │ AWS内のPilot Light環境 │
 │ - RDSのスタンバイDB    │
 │ - 最小限の設定・AMIなど│
 └───────────────────────┘
```

#### 災害時:
```
  ↓
  AWS上でWebサーバやアプリ層を自動起動
  → Route53などでトラフィックを切り替え
```

---

## 特徴

| 項目 | 説明 |
|------|------|
| 目的 | 低コストで災害復旧の仕組みを維持する |
| 平常時の稼働 | 一部の重要コンポーネントのみ |
| 災害時の対応 | 自動スケールアップまたは手動起動で本番化 |
| RTO（復旧時間） | 数十分〜数時間程度（起動時間を要する） |
| RPO（復旧時点） | 数分〜数時間（同期頻度による） |
| コスト | 💰 低コスト（必要最小限の常時リソース） |
| AWSサービス例 | EC2、RDS、CloudFormation、Route53、AWS Backupなど |

---

## 他のDR方式との違い

| DR戦略 | 概要 | RTO/RPO | コスト | 備考 |
|--------|------|---------|--------|------|
| バックアップ＆リストア | バックアップから復旧 | 長い | 安い | 手動復旧 |
| Pilot Light | 最小構成を起動済み | 中 | 中 | 起動後に拡張 |
| ウォームスタンバイ | 縮小版の本番を常時稼働 | 短い | 高め | 一部トラフィック可 |
| マルチサイト（Active-Active） | 完全二重化 | 非常に短い | 非常に高い | 完全冗長 |

---

## まとめ

Pilot Light は「最低限の火だけをAWS上に灯しておき、災害時に本格稼働へ拡張する」というコンセプト

コストを抑えつつ、復旧時間を短縮したい中規模DR構成に最適

Amazon VPC Transit Gateway

AWSが提供する 大規模ネットワーク接続のハブサービス

イメージすると：

たくさんの VPC、オンプレ環境、VPN、Direct Connect を 1つのハブ にまとめて接続できるルータのような存在

星型トポロジー（Hub & Spoke） を作れるので、VPC間を個別にピアリングするよりシンプルに管理できる
できること

VPC間通信の集約
→ VPC Peering だと VPCごとに個別接続が必要だが、TGWを使えば一元化

オンプレ接続の集約
→ Direct Connect や VPN でオンプレと接続し、そこから複数のVPCへ展開可能

マルチキャスト対応
→ TGWは Multicastドメイン を作れるため、AWS上でマルチキャスト通信を再現可能

セグメント分離
→ Route Table を分けて「AのVPCはBのVPCと通信できるけどCとは通信不可」みたいな制御が可能

メリット

スケーラブル：数千のVPCやオンプレを接続できる

シンプル：VPC Peeringの複雑なメッシュ接続が不要

柔軟なルーティング：ルートテーブルごとに接続制御が可能

マルチキャスト機能：AWSで唯一のネイティブマルチキャスト手段

   [ On-Premises ]
         │
   (Direct Connect / VPN)
         │
   ┌───────────┐
   │ Transit GW │  ← 中央ハブ
   └───────────┘
    /     |     \
 [VPC-A] [VPC-B] [VPC-C]

TGW = AWSのネットワーク接続を一元化するルータ兼ハブサービス で、
「VPC間通信」「オンプレ接続」「マルチキャスト」まで扱える強力なネットワーク基盤
TGWのマルチキャスト機能の仕組み

Multicast Domain（マルチキャストドメイン） を作成

これは「マルチキャストが有効な仮想ネットワークのグループ」

参加インターフェースを指定

どの VPC サブネット（ENI）がマルチキャストに参加するかを指定

受信する側は IGMP (Internet Group Management Protocol) を使ってグループ参加

マルチキャストIPアドレスを利用

224.0.0.0/4 の範囲（IPv4）を利用可能

送信者がマルチキャストで投げると、TGW が複製して参加者へ配信

メリット

ユニキャストのように1対1を繰り返さずに済む
→ 帯域の節約、効率的なデータ配信

閉じたネットワーク（VPC内・VPC間）で完結する
→ インターネットにマルチキャストを流さないので安全

 制約・注意点

インターネット越しには使えない（オンプレからDirect Connect/VPN経由なら可能）

UDPベースの通信が中心（TCPのような確認応答がないので信頼性確保はアプリ側で必要）

一部リージョンや機能制限がある → 最新情報はドキュメント確認が必要

追加コストが発生（TGWの利用料＋マルチキャスト転送料金）

「Multicast Domain」を使うことで、古いマルチキャスト依存アプリをAWS上で動かすことが可能

ただし、長期的にはKafkaやKinesisなどPub/Sub方式にリファクタリングするのが理想
# AWS Batch

## 概要

### AWS Batch
- **特徴**: バッチ処理専用のフルマネージドサービス
- **基盤**: コンテナ（ECS/Fargate/EC2）を使って大規模な並列処理が可能
- **用途**: HPC（ハイパフォーマンスコンピューティング）、研究計算、動画エンコード、データ分析など

> AWSでバッチといえばまずこれ

## バッチ処理とは

**リアルタイムに即時処理するのではなく、「まとめて一括で処理」すること**

## AWSでのバッチ処理の選択肢

### 用途別の選択指針

- **王道**: AWS Batch（本格的なバッチ/HPC向け）
- **軽量**: Lambda + EventBridge  
- **データ分析**: EMR / Glue / Athena
- **ワークフロー型**: Step Functions

## 各サービス詳細

### 1. AWS Batch
- **特徴**: バッチ処理専用のフルマネージドサービス
- **基盤**: コンテナ（ECS/Fargate/EC2）を使って大規模な並列処理が可能
- **用途**: HPC（ハイパフォーマンスコンピューティング）、研究計算、動画エンコード、データ分析など

> AWSでバッチといえばまずこれ

### 2. Amazon EC2 Auto Scaling + EC2
- **処理方式**: 単純に EC2 上でスクリプトやジョブを実行してバッチ処理
- **コスト最適化**: Auto Scaling や Spot Instance を組み合わせると可能

### 3. Amazon ECS / AWS Fargate
- **特徴**: コンテナベースのバッチジョブ
- **スケジュール**: ECS の スケジュールドタスク 機能で「毎日1回実行」など可能
- **メリット**: サーバーレスでコンテナを立ち上げて処理できる

### 4. AWS Lambda
- **適用範囲**: 軽量なバッチ（数分以内、メモリ・CPU制約が小さい処理）に最適
- **実行方法**: EventBridge（旧CloudWatch Events）で定期実行可能
- **例**: 1時間ごとにS3のファイルを処理、毎日集計して結果を保存

### 5. Amazon EMR
- **基盤**: Hadoop/Spark クラスターを使った大規模データ処理
- **強み**: データ分析系のバッチ処理に特化

### 6. Step Functions
- **機能**: ワークフローオーケストレーション
- **連携**: LambdaやECSタスクを組み合わせて「一連のバッチ処理ジョブ」を実行

### 7. その他関連サービス

#### Amazon Glue
- **特化**: ETLバッチ処理（データ変換/加工）に特化

#### Data Pipeline
- **状況**: 今は推奨されないが一部で利用

#### Athena + S3
- **機能**: S3に溜めたデータをまとめてSQLバッチ
# Amazon RDS

## ストレージ Auto Scaling

RDSのストレージに対するAuto Scalingが利用可能。これにより、増加するデータベースのワークロードに応じて**ストレージ容量がダウンタイムなしで自動的にスケール**される。

> **重要**: これはストレージ容量のスケーリングであるため、パフォーマンスを改善しない

## シャーディング

### 定義
**大きなデータベースを複数に分割して分散させる仕組み**

### 仕組み
- 各分割（シャード）は**異なるサーバー（DBインスタンス）**に配置される
- アプリ側は「どのシャードにデータを保存/検索するか」を**キーに基づいて決める**

> つまり「**水平分割（Horizontal Partitioning）**」の一種

### シャーディングの例（ユーザーID基準）

| ユーザーID範囲 | 配置先 |
|--------------|-------|
| 1〜10000 | RDS① |
| 10001〜20000 | RDS② |
| 20001〜30000 | RDS③ |

**メリット**: 1つのDBにユーザー全員分を置かずに済み、処理を分散できる


## RDSにおけるスケーリングの種類

### 1. 垂直スケーリング（Vertical Scaling）

#### 概要
DBインスタンスのインスタンスタイプを変更して性能を上げ下げする

#### 例
`db.t3.medium` → `db.r6g.large`

#### 注意
**基本的に手動。自動では切り替わらない**

### 2. ストレージの自動スケーリング（Auto Storage Scaling）✅

#### 概要
RDS ではストレージ容量を自動で拡張できる

#### 対応エンジン
Aurora / MySQL / PostgreSQL で設定可能

#### 動作
上限値を決めておけば、必要に応じて自動で容量が増加

### 3. Aurora専用のスケーリング機能

#### Aurora Auto Scaling（リーダーレプリカの自動増減）
- **動作**: 読み取りトラフィックに応じて Aurora Replicas を自動調整

#### Aurora Serverless v2
- **特徴**: キャパシティを秒単位で自動スケール
- **感覚**: ほぼ「EC2のAuto Scaling」みたいな感覚で使える

## スケーリング機能の制限事項

### 通常のRDS（MySQL, PostgreSQL, Oracle, SQL Server）

#### ❌ 利用不可
「自動でインスタンスサイズを変えるオートスケーリング」はない

#### ✅ 利用可能
ストレージの自動スケーリングはある

### 読み取り負荷分散
「読み取り負荷分散でスケーリングしたい」ときは**リードレプリカを追加**（手動 or Aurora Auto Scaling）